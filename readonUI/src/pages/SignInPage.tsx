import { useAuth } from "../context/AuthContext";
import { useNavigate } from "react-router-dom";
import SignInForm from "../components/SignInForm";
import axios from "axios";
import {useState} from "react";


const SignInPage = () =>{
    const [err, setErr] = useState("");
    const { signin }= useAuth();
    const navigate = useNavigate();

    const handleSignin = async (username: string, password: string) => {
        try{
            var response = await axios.post("https://localhost:7182/api/Auth/signin", 
                {username, password},
                {
                  headers: {
                    Accept: "*/*",
                    "Content-Type": "application/json",
                  },
                }
            );
            
            if (response.status == 200) {
                signin(response.data.accessToken, response.data.refreshToken);
                navigate("/admin_dashboard");
            }
            
        } catch (error) {
            setErr("Username or Password is Wrong!")
            console.error("Failed:", error);
        }
    };

    return (
        <div className="animate-fade-in flex items-center justify-center h-screen bg-[#dFDFDF]">
            <div className="flex items-center justify-center bg-white">
                <div className="flex flex-col items-center w-[469px] h-[575px]">
                    <svg className="mt-[60px]" width="73" height="61" viewBox="0 0 73 61" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fillRule="evenodd" clipRule="evenodd" d="M26.5028 11.167C30.0676 11.5107 34.1082 11.2378 37.694 12.3792C45.7132 14.9323 48.0099 22.7424 43.3012 29.7781C38.5886 36.8194 27.9145 39.9835 20.1437 36.6431C15.519 34.655 13.2352 30.9806 13.3788 25.7825C13.4038 24.885 13.3821 23.9876 13.3821 22.6764C12.2656 23.5457 11.5154 24.3747 10.5796 24.7852C9.7439 25.1523 8.45724 25.4533 7.82076 25.0581C7.14799 24.6387 6.60267 23.3138 6.70915 22.4743C7.11088 19.2949 8.78475 16.7482 11.471 14.9855C13.307 13.7797 15.0454 14.7327 15.2495 16.943C15.3084 17.5893 15.2584 18.2453 15.2584 19.0245C17.8245 16.9269 20.2695 14.9283 23.2301 12.5079C21.7684 12.788 20.8721 13.1696 20.0356 13.0649C19.1168 12.9514 18.0616 12.578 17.451 11.9453C17.1654 11.6507 17.5462 10.2445 18.0382 9.75032C20.8366 6.93716 24.2457 5.31044 28.2743 5.37645C30.1539 5.40703 30.7782 6.88565 29.5319 8.34898C28.5139 9.54829 27.2208 10.5134 26.5028 11.167Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M50.7725 29.7925C55.9531 29.7957 58.5433 33.7253 56.1442 38.4911C53.7048 43.3391 49.6754 46.3511 44.0351 46.5314C38.5633 46.706 36.6837 43.1363 38.3891 38.1973C39.9871 33.5691 45.8759 29.7901 50.7725 29.7925Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M55.9241 26.8547C51.2494 26.8225 47.0836 22.5492 47.0957 17.7986C47.1038 14.2916 49.5763 11.6998 52.8926 11.7216C57.5221 11.753 62.3098 16.5583 62.2864 21.1527C62.2687 24.6903 59.822 26.8804 55.9241 26.8547Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M25.1659 50.7226C22.9951 50.1222 20.7469 49.7116 18.6753 48.8689C16.6263 48.035 15.1122 46.3882 15.1461 44.0274C15.1791 41.7229 16.7675 40.3626 18.8213 39.6607C22.8314 38.29 26.8479 38.4099 30.6393 40.3232C32.748 41.3881 34.4493 43.051 33.9427 45.7571C33.4296 48.5051 31.1273 49.4034 28.821 50.0642C27.707 50.3837 26.4711 50.2823 25.2901 50.3725C25.249 50.4892 25.2079 50.6051 25.1659 50.7226Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M67.1203 32.4125C71.7765 32.3844 73.8311 35.707 71.8499 39.4531C70.0969 42.7693 65.7062 44.784 62.6109 43.6925C59.6189 42.6373 58.5024 40.0173 59.9133 37.176C61.4565 34.0698 64.1105 32.6427 67.1203 32.4125Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M33.2886 60.8017C31.4292 60.281 29.9715 60.0902 28.7244 59.4769C25.9921 58.1319 25.813 55.0933 28.3492 53.3845C31.4009 51.3288 34.7922 51.1799 38.115 52.475C40.9908 53.5954 41.3724 56.7643 38.7918 58.5086C37.1179 59.6387 35.0004 60.1152 33.2886 60.8017Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M42.3129 11.9758C40.1429 11.29 37.7043 10.8296 35.5674 9.76311C33.1586 8.56058 33.3191 6.49277 35.6408 5.13891C38.6417 3.38984 45.8502 3.76735 48.5865 5.81745C50.5839 7.31217 50.5274 9.35664 48.2356 10.374C46.5036 11.1427 44.5426 11.3971 42.3129 11.9758Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M14.5274 35.9984C14.7073 38.1805 13.8465 39.9207 11.8669 40.753C9.76792 41.6344 8.00692 40.5212 6.7259 38.9476C5.0843 36.9305 4.01382 34.6115 4.78421 31.9054C5.79902 28.3413 9.31133 27.2804 11.8104 29.9978C13.2609 31.5738 14.0563 33.7503 15.1461 35.6555C14.9404 35.7698 14.7339 35.8841 14.5274 35.9984Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M56.8278 2.6936C58.6815 3.60476 60.3393 4.11588 61.5727 5.13811C62.3108 5.74904 62.8997 7.33873 62.6117 8.15733C62.3173 8.99524 60.8418 9.96435 59.9311 9.91847C58.3185 9.83798 56.5478 9.32122 55.22 8.42858C54.2948 7.80719 53.3259 6.04605 53.5978 5.17031C53.9092 4.169 55.5718 3.58705 56.8278 2.6936Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M9.34841 46.6955C8.56996 47.7966 8.04803 49.3155 7.16229 49.5674C6.29107 49.8145 4.72207 49.0474 4.05897 48.2369C3.21356 47.2026 2.58677 45.6773 2.58838 44.3653C2.59 43.3157 3.44831 41.8628 4.35583 41.3614C4.97537 41.0185 6.65973 41.7276 7.2833 42.4609C8.19969 43.5403 8.59174 45.0599 9.34841 46.6955Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M32.4344 3.84467C31.5438 3.27721 30.6597 2.71297 29.7739 2.15034C30.6597 1.49112 31.4607 0.505909 32.4497 0.255582C33.7864 -0.08248 35.3054 -0.0631616 36.6759 0.18475C38.0868 0.439907 38.3192 1.52895 37.0204 2.23807C35.7321 2.94156 34.2228 3.24018 32.4344 3.84467Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M4.48101 23.7276C4.3955 26.2985 2.64499 28.8919 1.30428 28.7181C0.788809 28.6513 0.0361708 27.7111 0.00390337 27.1356C-0.102579 25.2296 1.994 22.3714 3.30002 22.5758C3.85583 22.6636 4.28902 23.528 4.48101 23.7276Z" fill="black"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M11.4711 13.0384C11.0259 11.8174 10.6403 11.2395 10.6717 10.6857C10.6943 10.2832 11.1936 9.75037 11.6115 9.55639C13.0869 8.87221 14.6164 8.30958 16.1257 7.69946C16.2177 8.15424 16.5412 8.86658 16.3653 9.02354C14.956 10.2864 13.4508 11.4431 11.4711 13.0384Z" fill="black"/>
                    </svg>
                    <p className="mt-[12px] text-[30px] font-[500]">Welcome Back !!</p>         
                    <p className="mt-[20px] mb-[28px] text-[12px] text-[#1F1F1F]">Please enter your credentials to log in</p>       
                    <SignInForm onSignIn={handleSignin}></SignInForm>
                    {err != "" ? <div className="text-[red] text-[8px] w-[260px] top-[57.5%] text-right absolute">{err}</div>:""}
                </div>
                <div className="rounded-l-[32px] text-white flex flex-col items-center bg-black w-[469px] h-[575px]">
                    <svg className="mt-[120px]" width="89" height="74" viewBox="0 0 89 74" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fillRule="evenodd" clipRule="evenodd" d="M32.2944 13.5546C36.6213 13.9718 41.5259 13.6406 45.8783 15.026C55.6122 18.1251 58.3999 27.6049 52.6845 36.145C46.9642 44.6918 34.0079 48.5324 24.5756 44.4779C18.9621 42.0646 16.1901 37.6046 16.3644 31.2951C16.3947 30.2057 16.3683 29.1164 16.3683 27.5248C15.0131 28.58 14.1025 29.5863 12.9667 30.0846C11.9523 30.5301 10.3905 30.8955 9.61793 30.4158C8.80131 29.9068 8.13939 28.2986 8.26864 27.2796C8.75627 23.4204 10.788 20.3292 14.0486 18.1895C16.2772 16.726 18.3873 17.8828 18.635 20.5656C18.7065 21.3502 18.6458 22.1464 18.6458 23.0922C21.7605 20.5461 24.7284 18.1202 28.3219 15.1823C26.5477 15.5223 25.4598 15.9854 24.4444 15.8584C23.3292 15.7206 22.0484 15.2673 21.3072 14.4994C20.9606 14.1418 21.4227 12.435 22.02 11.8351C25.4167 8.42045 29.5547 6.44591 34.4446 6.52603C36.7261 6.56316 37.484 8.35792 35.9711 10.1341C34.7354 11.5899 33.1658 12.7613 32.2944 13.5546Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M61.7534 36.1624C68.0416 36.1663 71.1857 40.936 68.2737 46.7209C65.3127 52.6054 60.4218 56.2613 53.5754 56.4802C46.9338 56.6922 44.6523 52.3592 46.7223 46.3643C48.662 40.7465 55.8099 36.1594 61.7534 36.1624Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M68.0065 32.5964C62.3323 32.5573 57.2759 27.3704 57.2906 21.6041C57.3004 17.3473 60.3015 14.2013 64.3268 14.2277C69.9463 14.2658 75.7576 20.0985 75.7292 25.6753C75.7076 29.9692 72.7378 32.6277 68.0065 32.5964Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M30.6717 61.5677C28.0367 60.8388 25.3078 60.3406 22.7933 59.3176C20.3062 58.3055 18.4683 56.3065 18.5095 53.4409C18.5496 50.6438 20.4776 48.9926 22.9705 48.1407C27.838 46.4768 32.7132 46.6224 37.3153 48.9448C39.8748 50.2373 41.9399 52.2558 41.325 55.5405C40.7022 58.876 37.9077 59.9664 35.1083 60.7685C33.756 61.1564 32.2559 61.0333 30.8225 61.1427C30.7725 61.2844 30.7226 61.425 30.6717 61.5677Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M81.5964 39.3425C87.2481 39.3083 89.742 43.3414 87.3372 47.8884C85.2095 51.9136 79.8799 54.3591 76.1228 53.0343C72.4911 51.7534 71.136 48.5733 72.8485 45.1244C74.7217 41.3542 77.9431 39.6219 81.5964 39.3425Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M40.5309 73.8015C38.2739 73.1694 36.5046 72.9379 34.9908 72.1934C31.6744 70.5608 31.457 66.8726 34.5355 64.7984C38.2396 62.3032 42.356 62.1224 46.3892 63.6944C49.8799 65.0544 50.3431 68.9009 47.2107 71.018C45.179 72.3898 42.6087 72.9682 40.5309 73.8015Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M51.4847 14.5364C48.8508 13.704 45.8908 13.1451 43.297 11.8506C40.3732 10.3909 40.568 7.881 43.3861 6.23768C47.0285 4.11464 55.7784 4.57286 59.0997 7.06129C61.5241 8.8756 61.4555 11.3572 58.6737 12.5921C56.5715 13.5252 54.1911 13.8339 51.4847 14.5364Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M17.7588 43.6952C17.9772 46.3439 16.9324 48.4561 14.5295 49.4664C11.9817 50.5362 9.84422 49.185 8.28931 47.2749C6.29671 44.8266 4.99736 42.0118 5.93246 38.7271C7.16425 34.4009 11.4275 33.1132 14.461 36.4116C16.2215 38.3246 17.187 40.9664 18.5098 43.279C18.2601 43.4177 18.0095 43.5565 17.7588 43.6952Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M69.103 3.26953C71.3531 4.3755 73.3653 4.9959 74.8625 6.2367C75.7584 6.97825 76.4732 8.90784 76.1236 9.90145C75.7662 10.9185 73.9753 12.0948 72.8699 12.0391C70.9125 11.9414 68.7633 11.3142 67.1516 10.2307C66.0285 9.47645 64.8525 7.33876 65.1825 6.27578C65.5604 5.06038 67.5785 4.35401 69.103 3.26953Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M11.4725 56.6797C10.5276 58.0163 9.89407 59.8599 8.81895 60.1657C7.76146 60.4656 5.85698 59.5345 5.05211 58.5507C4.02595 57.2952 3.26514 55.4438 3.26709 53.8513C3.26905 52.5773 4.31088 50.8138 5.41244 50.2051C6.16444 49.7889 8.20893 50.6496 8.96583 51.5397C10.0782 52.8498 10.554 54.6944 11.4725 56.6797Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M39.4939 4.6667C38.4129 3.97791 37.3398 3.29303 36.2646 2.6101C37.3398 1.80993 38.3121 0.614077 39.5125 0.310228C41.135 -0.100115 42.9788 -0.0766662 44.6424 0.224252C46.3549 0.533963 46.6369 1.85585 45.0605 2.7166C43.4968 3.5705 41.6647 3.93297 39.4939 4.6667Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M5.5641 28.8006C5.46031 31.9212 3.33552 35.0691 1.70815 34.858C1.08246 34.777 0.168905 33.6358 0.129738 32.9372C0.000488326 30.6237 2.54533 27.1543 4.1306 27.4025C4.80524 27.509 5.33106 28.5583 5.5641 28.8006Z" fill="white"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M14.0487 15.8262C13.5082 14.3441 13.0402 13.6426 13.0784 12.9704C13.1058 12.4819 13.7119 11.8351 14.2191 11.5997C16.01 10.7692 17.8665 10.0863 19.6985 9.3457C19.8101 9.89771 20.2028 10.7624 19.9893 10.9529C18.2787 12.4858 16.4516 13.8898 14.0487 15.8262Z" fill="white"/>
                    </svg>
                    <p className="text-[48px] mt-[-4px] font-[300] ">ReadOn</p>
                    <p className="text-[16px] mt-[-8px]">LIBRARY</p>
                    <p className="text-[14px] mt-[72px]">New to our platform? Sign Up now.</p>
                    <a href="/signup" type="button" className="hover:bg-[#2f2f2f] hover:border-[#2f2f2f] flex items-center justify-center mt-[32px] text-[14px] font-[500] rounded-[12px] border-[1px] w-[200px] h-[40px]">SIGN UP</a>
                </div>
            </div>
        </div>
    )
};

export default SignInPage;